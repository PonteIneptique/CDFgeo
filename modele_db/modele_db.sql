-- MySQL Script generated by MySQL Workbench
-- dim. 03 juin 2018 13:12:11 CEST
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema collegeGlobal
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema collegeGlobal
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `collegeGlobal` DEFAULT CHARACTER SET utf8 ;
USE `collegeGlobal` ;

-- -----------------------------------------------------
-- Table `collegeGlobal`.`chaire`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `collegeGlobal`.`chaire` ;

CREATE TABLE IF NOT EXISTS `collegeGlobal`.`chaire` (
  `chaire_id` SMALLINT NOT NULL,
  `chaire_intitule` TINYTEXT NOT NULL,
  `chaire_type` TINYTEXT NOT NULL,
  `chaire_debut` VARCHAR(4) NOT NULL,
  `chaire_fin` VARCHAR(4) NOT NULL,
  `chaire_precision` TEXT NULL,
  PRIMARY KEY (`chaire_id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `collegeGlobal`.`personne`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `collegeGlobal`.`personne` ;

CREATE TABLE IF NOT EXISTS `collegeGlobal`.`personne` (
  `personne_id` SMALLINT NOT NULL,
  `personne_prenom` TINYTEXT NOT NULL,
  `personne_nom` TINYTEXT NOT NULL,
  `personne_statut` TINYTEXT NOT NULL,
  `personne_naissance` VARCHAR(4) NULL,
  `personne_deces` VARCHAR(4) NULL,
  `personne_precision` TEXT NULL,
  `personne_liensexternes` TINYTEXT NULL,
  `chaire_chaire_id` SMALLINT NULL,
  PRIMARY KEY (`personne_id`),
  INDEX `fk_personne_chaire_idx` (`chaire_chaire_id` ASC),
  CONSTRAINT `fk_personne_chaire`
    FOREIGN KEY (`chaire_chaire_id`)
    REFERENCES `collegeGlobal`.`chaire` (`chaire_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `collegeGlobal`.`lieu`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `collegeGlobal`.`lieu` ;

CREATE TABLE IF NOT EXISTS `collegeGlobal`.`lieu` (
  `lieu_ville_id` SMALLINT NOT NULL,
  `lieu_ville` TINYTEXT NULL,
  `lieu_latville` FLOAT NULL,
  `lieu_longville` FLOAT NULL,
  `lieu_pays_id` SMALLINT NOT NULL,
  `lieu_pays` TINYTEXT NOT NULL,
  `lieu_latpays` FLOAT NOT NULL,
  `lieu_longpays` FLOAT NOT NULL,
  PRIMARY KEY (`lieu_ville_id`, `lieu_pays_id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `collegeGlobal`.`mission`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `collegeGlobal`.`mission` ;

CREATE TABLE IF NOT EXISTS `collegeGlobal`.`mission` (
  `mission_id` SMALLINT NOT NULL,
  `mission_intitule` TINYTEXT NOT NULL,
  `mission_type` TINYTEXT NULL,
  `mission_institution` TINYTEXT NULL,
  `mission_date_debut` VARCHAR(10) NULL,
  `mission_date_fin` VARCHAR(10) NULL,
  `mission_dates` TINYTEXT NULL,
  `mission_precision` TEXT NULL,
  PRIMARY KEY (`mission_id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `collegeGlobal`.`personne_mission`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `collegeGlobal`.`personne_mission` ;

CREATE TABLE IF NOT EXISTS `collegeGlobal`.`personne_mission` (
  `personne_mission_id` SMALLINT NOT NULL AUTO_INCREMENT,
  `personne_mission_personne_id` SMALLINT NOT NULL,
  `personne_mission_mission_id` SMALLINT NOT NULL,
  PRIMARY KEY (`personne_mission_id`),
  INDEX `fk_personne_mission_mission1_idx` (`personne_mission_mission_id` ASC),
  INDEX `fk_personne_mission_personne1_idx` (`personne_mission_personne_id` ASC),
  CONSTRAINT `fk_personne_mission_personne1`
    FOREIGN KEY (`personne_mission_personne_id`)
    REFERENCES `collegeGlobal`.`personne` (`personne_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_personne_mission_mission1`
    FOREIGN KEY (`personne_mission_mission_id`)
    REFERENCES `collegeGlobal`.`mission` (`mission_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `collegeGlobal`.`mission_lieu`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `collegeGlobal`.`mission_lieu` ;

CREATE TABLE IF NOT EXISTS `collegeGlobal`.`mission_lieu` (
  `mission_lieu_id` SMALLINT NOT NULL AUTO_INCREMENT,
  `mission_lieu_mission_id` SMALLINT NOT NULL,
  `mission_lieu_lieu_id` SMALLINT NOT NULL,
  PRIMARY KEY (`mission_lieu_id`),
  INDEX `fk_mission_lieu_lieu1_idx` (`mission_lieu_lieu_id` ASC),
  INDEX `fk_mission_lieu_mission1_idx` (`mission_lieu_mission_id` ASC),
  INDEX `fk_mission_lieu_lieu2_idx` (`mission_lieu_lieu_id` ASC),
  CONSTRAINT `fk_mission_lieu_mission1`
    FOREIGN KEY (`mission_lieu_mission_id`)
    REFERENCES `collegeGlobal`.`mission` (`mission_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_mission_lieu_lieu1`
    FOREIGN KEY (`mission_lieu_lieu_id`)
    REFERENCES `collegeGlobal`.`lieu` (`lieu_ville_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_mission_lieu_lieu2`
    FOREIGN KEY (`mission_lieu_lieu_id`)
    REFERENCES `collegeGlobal`.`lieu` (`lieu_pays_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
